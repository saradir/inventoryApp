<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>

<body>
    <div class="container">
        <%- include('partials/nav') %>
        <div class='brands'>
            <h2>Brands</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th> </th>
                        <th> </th>
                    </tr>
                </thead>
        
                <tbody>
                    <% if(brands)  { %>
                            <% brands.forEach((brand) => { %>
                            <tr>
                                <td><%=brand.id %></td>
                                <td><%= brand.name %></td>
                                <td><a href='/brands/<%= brand.id %>/edit/'>Edit</a> </td>
                                <td><a href="#" onclick="confirmDelete('<%= brand.id %>', '<%= brand.name %>')">Delete</a></td>
                            </tr>
                            <% })} %>
                </tbody>
            </table>
        </div>
        
        <a href="/brands/new/">Add New Brand</a>
        
        <form id="deleteForm" method="post" style="display:none;"></form>
    </div>

<script>
    function confirmDelete(id, name) {
    if (confirm(`Are you sure you want to delete this brand (${name})?`)) {
        const form = document.getElementById('deleteForm');
        form.action = `/brands/${id}/delete`;
        form.submit();
    }
    }
</script>
</body>
</html>