<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>
<body>
    <div class="container">
        <%- include('partials/nav') %>
        <div class="items">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Brand</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th> </th>
                            <th> </th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if(items)  { %>
                            <% items.forEach((item) => { %>
                            <tr>
                                <td><%=item.id %></td>
                                <td><%= item.name %></td>
                                <td><%= item.category_name %></td>
                                <td><%= item.brand_name %></td>
                                <td><%= item.quantity || '' %></td>
                                <td><%= item.price || '' %></td>
                                <td><a href='/items/<%= item.id %>/edit/'>Edit</a></td>
                                <td><a href="#" onclick="confirmDelete('<%= item.id %>', '<%= item.name %>')">Delete</a></td>
                            </tr>
                            <% })} %>
                    </tbody>
                </table>
        
                <a href="/items/new">Add New Item</a>
        </div>
        
        <form id="deleteForm" method="post" style="display:none;"></form>
    </div>

<script>
    function confirmDelete(id, name) {
    if (confirm(`Are you sure you want to delete this item (${name})?`)) {
        const form = document.getElementById('deleteForm');
        form.action = `/items/${id}/delete`;
        form.submit();
    }
 }
</script>
</body>
</html>