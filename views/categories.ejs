<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>
<body>
    <div class="container">
        <%- include('partials/nav') %>
        <div class="categories">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th> </th>
                        <th> </th>
                    </tr>
                </thead>
        
                <tbody>
                    <% if(categories)  { %>
                            <% categories.forEach((category) => { %>
                            <tr>
                                <td><%=category.id %></td>
                                <td><%= category.name %></td>
                                <td><a href='/categories/<%= category.id %>/edit/'>Edit</a> </td>
                                <td><a href="#" onclick="confirmDelete('<%= category.id %>', '<%= category.name %>')">Delete</a></td>
                            </tr>
                            <% })} %>
                </tbody>
            </table>
        </div>
        <a href="/categories/new">New Category</a>   
        <form id="deleteForm" method="post" style="display:none;"></form>
    </div>



<script>
    function confirmDelete(id, name) {
    if (confirm(`Are you sure you want to delete this category (${name})?`)) {
        const form = document.getElementById('deleteForm');
        form.action = `/categories/${id}/delete`;
        form.submit();
    }
 }
</script>
</body>
</html>